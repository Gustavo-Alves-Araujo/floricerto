<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produto - La Floricultura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Montserrat:wght@200;300;400&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'paper': '#F7F5F0',
                        'ink': '#1A1A1A',
                        'rust': '#8F4F3B',
                        'pine': '#2F3E35'
                    },
                    fontFamily: {
                        'serif': ['"Cormorant Garamond"', 'serif'],
                        'sans': ['"Montserrat"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cfilter id=\"noiseFilter\"%3E%3CfeTurbulence type=\"fractalNoise\" baseFrequency=\"0.65\" numOctaves=\"3\" stitchTiles=\"stitch\"/%3E%3C/filter%3E%3Crect width=\"100%25\" height=\"100%25\" filter=\"url(%23noiseFilter)\" opacity=\"0.05\"/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>
    <style>
        body { 
            font-feature-settings: "pnum";
            scroll-behavior: smooth;
        }
        
        .wavy-line {
            height: 2px;
            background: linear-gradient(90deg, transparent, #8F4F3B, transparent);
            opacity: 0.3;
        }
    </style>
</head>
<body class="bg-paper text-ink font-serif antialiased selection:bg-rust selection:text-white relative">
    <div class="fixed inset-0 bg-noise pointer-events-none z-50 mix-blend-multiply"></div>

    <!-- Header -->
    <header class="fixed w-full top-0 bg-paper/90 backdrop-blur-sm z-40 border-b border-ink/5">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-3xl font-normal tracking-tight italic hover:text-rust transition-colors duration-300">
                La Floricultura
            </a>
            
            <div class="flex items-center gap-8 font-sans text-xs tracking-widest uppercase">
                <a href="index.html" class="relative group overflow-hidden hidden md:block">
                    <span class="group-hover:-translate-y-full inline-block transition-transform duration-300">Início</span>
                    <span class="absolute top-full left-0 group-hover:-translate-y-full transition-transform duration-300 text-rust">Início</span>
                </a>
                <a href="#produtos" class="relative group overflow-hidden hidden md:block">
                    <span class="group-hover:-translate-y-full inline-block transition-transform duration-300">Coleção</span>
                    <span class="absolute top-full left-0 group-hover:-translate-y-full transition-transform duration-300 text-rust">Coleção</span>
                </a>
                <a href="carrinho.html" class="flex items-center gap-2 group">
                    <span>Carrinho</span>
                    <span class="cart-count bg-ink text-paper w-4 h-4 rounded-full flex items-center justify-center font-serif text-[10px] opacity-0 transition-opacity group-hover:opacity-100">0</span>
                </a>
                <a href="admin.html" class="text-ink/30 hover:text-ink transition-colors">Admin</a>
            </div>
        </nav>
    </header>

    <!-- Product Detail Section -->
    <section class="container mx-auto px-6 pt-32 pb-16">
        <div id="productDetail" class="min-h-[50vh]">
            <!-- Conteúdo será carregado via JavaScript -->
        </div>
        
        <div class="mt-24 border-t border-ink/10 pt-16">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12">
                <h2 class="text-3xl italic">Complete o ambiente</h2>
                <a href="index.html" class="font-sans text-xs tracking-widest uppercase border-b border-ink/30 pb-1 mt-4 md:mt-0 hover:border-ink transition-colors">Ver catálogo completo</a>
            </div>
            <div id="relatedProducts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Produtos relacionados -->
            </div>
        </div>
    </section>

    <!-- Footer 'Carta' -->
    <footer class="bg-[#EBE8E0] pt-20 pb-10 border-t-4 border-double border-ink/10 mt-16">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                <div class="col-span-1 md:col-span-2">
                    <h3 class="text-4xl italic mb-6">La Floricultura</h3>
                    <p class="font-sans text-sm text-ink/60 max-w-md mb-8">
                        Design botânico autoral. Transformamos referências culturais e naturais em identidade visual refinada.
                    </p>
                </div>
                
                <div>
                    <h4 class="font-sans text-xs tracking-[0.2em] uppercase mb-6 text-rust">Navegação</h4>
                    <ul class="space-y-4 font-serif text-lg text-ink/80">
                        <li><a href="#" class="hover:text-rust hover:italic transition-all">Início</a></li>
                        <li><a href="#produtos" class="hover:text-rust hover:italic transition-all">Coleção</a></li>
                        <li><a href="carrinho.html" class="hover:text-rust hover:italic transition-all">Carrinho</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-sans text-xs tracking-[0.2em] uppercase mb-6 text-rust">Atendimento</h4>
                    <ul class="space-y-2 font-sans text-sm text-ink/60">
                        <li>Seg — Sáb: 9h às 19h</li>
                        <li class="pt-4 text-ink">contato@lafloricultura.com</li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-ink/10 pt-8 flex flex-col md:flex-row justify-between items-center text-xs font-sans text-ink/40 uppercase tracking-wider">
                <p>&copy; 2026 La Floricultura. Rio de Janeiro.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/produtos.js"></script>
    <script src="js/cart.js"></script>
    <script>
        function getProductIdFromUrl() {
            const params = new URLSearchParams(window.location.search);
            return parseInt(params.get('id'));
        }

        function renderProductDetail() {
            const productId = getProductIdFromUrl();
            const produto = produtos.find(p => p.id === productId);
            
            if (!produto) {
                document.getElementById('productDetail').innerHTML = `
                    <div class="text-center py-16">
                        <h2 class="text-3xl italic mb-4">Peça não encontrada</h2>
                        <a href="index.html" class="font-sans text-xs tracking-widest uppercase border-b border-rust text-rust pb-1 hover:text-ink hover:border-ink transition-colors">Voltar ao catálogo</a>
                    </div>
                `;
                return;
            }

            document.title = `${produto.nome} - La Floricultura`;

            document.getElementById('productDetail').innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                    <div class="sticky top-24">
                        <div class="relative overflow-hidden rounded-xl shadow-2xl" style="max-width: 420px; margin: 0 auto;">
                             <img src="${produto.imagem}" alt="${produto.nome}" class="w-full h-auto object-cover">
                             <div class="absolute top-6 right-6 bg-rust text-paper px-4 py-2 text-sm font-sans tracking-widest uppercase shadow-xl rounded-lg">
                                ${produto.categoria}
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-8 space-y-6">
                        <nav class="flex items-center gap-2 font-sans text-sm tracking-wider uppercase text-ink/50">
                            <a href="index.html" class="hover:text-rust transition-colors">Início</a>
                            <span>/</span>
                            <a href="index.html#produtos" class="hover:text-rust transition-colors">Produtos</a>
                            <span>/</span>
                            <span class="text-ink">${produto.categoria}</span>
                        </nav>
                        
                        <h1 class="text-5xl md:text-6xl font-serif leading-tight">${produto.nome}</h1>
                        
                        <div class="flex items-center gap-6">
                            <span class="text-5xl md:text-6xl font-light text-rust">R$ ${produto.preco.toFixed(2)}</span>
                            <span class="text-sm font-sans text-ink/40 uppercase tracking-wider">Ref: ${produto.id.toString().padStart(4, '0')}</span>
                        </div>
                        
                        <div class="h-px bg-gradient-to-r from-rust/50 via-rust to-transparent"></div>
                        
                        <div>
                            <h3 class="text-lg font-sans font-semibold uppercase tracking-wider text-ink/70 mb-3">Descrição</h3>
                            <p class="text-lg leading-relaxed text-ink/80">
                                ${produto.descricao}
                            </p>
                        </div>
                        
                        <div class="bg-paper/50 rounded-xl p-6 border border-ink/5">
                            <h3 class="text-lg font-sans font-semibold uppercase tracking-wider text-ink/70 mb-4">Destaques</h3>
                            <ul class="space-y-3">
                                ${produto.destaques.split('\n').map(destaque => `
                                    <li class="flex items-start gap-3">
                                        <svg class="w-6 h-6 text-rust flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                        </svg>
                                        <span class="text-base text-ink/70">${destaque}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-paper/50 rounded-lg p-5 border border-ink/5">
                                <h4 class="text-sm font-sans font-semibold uppercase tracking-wider text-rust mb-2">Ocasião Ideal</h4>
                                <p class="text-base text-ink/70">${produto.ocasiao}</p>
                            </div>
                            <div class="bg-paper/50 rounded-lg p-5 border border-ink/5">
                                <h4 class="text-sm font-sans font-semibold uppercase tracking-wider text-rust mb-2">Entrega</h4>
                                <p class="text-base text-ink/70">${produto.entrega}</p>
                            </div>
                        </div>

                        <div class="pt-6 space-y-4">
                            <button onclick="addToCart(${produto.id})" class="w-full bg-rust text-paper py-5 px-8 font-sans text-base tracking-widest uppercase hover:bg-pine transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 rounded-lg">
                                Adicionar ao Carrinho
                            </button>
                            <button onclick="comprarAgora(${produto.id})" class="w-full border-2 border-rust text-rust py-5 px-8 font-sans text-base tracking-widest uppercase hover:bg-rust hover:text-paper transition-all duration-300 rounded-lg">
                                Comprar Agora
                            </button>
                        </div>
                        
                        <div class="pt-4 border-t border-ink/5">
                            <p class="text-sm text-ink/50 leading-relaxed">
                                <strong class="text-ink/70">Tags:</strong> ${produto.palavrasChave}
                            </p>
                        </div>
                    </div>
                </div>
            `;

            renderRelatedProducts(productId);
        }

        function renderRelatedProducts(currentProductId) {
            const relatedProducts = produtos.filter(p => p.id !== currentProductId).slice(0, 4);
            
            document.getElementById('relatedProducts').innerHTML = relatedProducts.map(produto => `
                <a href="produto.html?id=${produto.id}" class="group block">
                    <div class="mb-4 aspect-[4/5] overflow-hidden rounded-lg shadow-lg group-hover:shadow-2xl transition-all duration-500">
                        <img src="${produto.imagem}" alt="${produto.nome}" class="w-full h-full object-cover group-hover:scale-110 group-hover:brightness-105 transition-all duration-700">
                    </div>
                    <div class="text-center">
                        <h3 class="font-serif text-lg mb-2 group-hover:text-rust transition-colors">${produto.nome}</h3>
                        <span class="font-sans text-lg font-light text-rust">R$ ${produto.preco.toFixed(2)}</span>
                    </div>
                </a>
            `).join('');
        }

        // Função Comprar Agora - Adiciona ao carrinho e vai direto para o checkout
        function comprarAgora(productId) {
            addToCart(productId);
            // Pequeno delay para garantir que foi adicionado ao carrinho
            setTimeout(() => {
                window.location.href = 'carrinho.html';
            }, 300);
        }

        document.addEventListener('DOMContentLoaded', renderProductDetail);
    </script>
</body>
</html>
